(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{162:function(t,s){t.exports="data:image/png;base64,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o9nI62vOnDmYOXNm/eRWfkR+7NixeP31122BzgnB55wTxcjG6XOtubhba82aNxO44dpoTPTcPnHxeDZ5criMxf9zDC4X36C4SN/QjEegQSFRrFBYuinWozAhZrvYgjNmpVsFW2ozzTmm0xKgadbEGQX3CKgN3WOZTCU5RWSk8WQ6ztZqqxnzaSYcUfzxOdTcoWTx1ghuth9f1BYuXNigSArztm3b2t7h3NzcBtu0AsTF4ynQIiACIiACIiACIhBXAnHweMb0eFqoxzMK329MMatwERABERABERABERCBFkpAwrOFNqwOSwREQAREQAREQAS8RkDC02stIntEQAREQAREQAREoIUSkPBsoQ2rwxIBERABERABERABrxGQ8PRai8geERABERABERABEWihBCQ8W2jD6rBEQAREQAREoFUTSKn/tRHgzJnkQ+G0OaXlyLWWcyTJd0rJYhEQAREQAREQgVgR6NLZV/Lnu33xZIj946T1M3rf+Cx1HosvNSljEp5J2WwyWgREQAREQAREICSBQQN8m98pBZaXANUNf3XJl8FDsarDwONPAYeP1hp1/nlAn14eMrB5psTll4uaZ6L2FgEREAEREAEREIEICWT1Bq61fjnoox21O/55BcC/ZAsTrZ8Udw4bSDb7/eyVx9MPiFZFQAREQAREQARaCIEnCoC+fZL3YMaMAkb/W/LaH8ByeTwDQFGSCIiACIiACIhACyBwbprl5XwGeONt4O3NwL5K4KQ1ftLLgTZfbonl/xgJ5Pb3sqVR2abfao8Km3YSAREQAREQAREQARGIlECTHs+dO3dGWqbyi4AIiIAIiIAIiIAIiEAjAk0Kz5ycnEY7KUEEREAEREAEREAEREAEIiWgyUWRElN+ERABERABERABERCBqAhIeEaFTTuJgAiIgAiIgAiIgAhESkDCM1Jiyi8CIiACIiACIiACIhAVAQnPqLBpJxEQAREQAREQAREQgUgJSHhGSkz5RUAEREAEREAEREAEoiLw/yj0f+hRGr51AAAAAElFTkSuQmCC"},163:function(t,s,a){t.exports=a.p+"assets/img/quill-upload-voice.e1b37f39.gif"},214:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h3",{attrs:{id:"vue-quill-editor-富文本添加上传音频功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue-quill-editor-富文本添加上传音频功能"}},[t._v("#")]),t._v(" vue-quill-editor 富文本添加上传音频功能")]),t._v(" "),n("h4",{attrs:{id:"_1-前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[t._v("#")]),t._v(" 1. 前言")]),t._v(" "),n("p",[t._v("vue-quill-editor 是vue项目中常用的富文本插件，其功能能满足大部分的项目需求。但是，最近项目中，需要在富文本中上传音频文件，但是vue-quill-editor这个富文本仅支持图片，视频上传；所以这个功能需要自定义。")]),t._v(" "),n("p",[n("strong",[t._v("怎么实现这个功能？")])]),t._v(" "),n("ul",[n("li",[t._v("写一个只能上传音频的组件，并且隐藏")]),t._v(" "),n("li",[t._v("在富文本插件的toolbar定义一个按钮，点击时调用上传组件")]),t._v(" "),n("li",[t._v("监听上传成功的回调函数，在富文本输入框中插入音频标签")])]),t._v(" "),n("h4",{attrs:{id:"_2-功能实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-功能实现"}},[t._v("#")]),t._v(" 2. 功能实现")]),t._v(" "),n("h4",{attrs:{id:"_2-1-基于element-ui实现上传组件，并且隐藏（不能让用户点击）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-基于element-ui实现上传组件，并且隐藏（不能让用户点击）"}},[t._v("#")]),t._v(" 2.1 基于Element-ui实现上传组件，并且隐藏（不能让用户点击）")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--\n首先，必须隐藏这个元素：display:none；\nv-loading.fullscreen.lock：设置上传时显示loading，值为true/false；\naction：设置上传的地址；\nbefore-upload：上传前的钩子函数，验证是否为音频文件；\non-success：上传成功的钩子函数；\non-progress：上传时的钩子函数，设置显示loading\n --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token style-attr language-css"}},[n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("style")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('="')]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token property"}},[t._v("display")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("none")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-upload")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-loading.fullscreen.lock")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("fullscreenLoading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":action")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("actionUrl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":before-upload")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("beforeUpload"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":on-success")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleSuccess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":on-progress")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uploadIng"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("el-button")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("size")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("small"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("uploadVoiceBtn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("primary"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("upload"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("el-upload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[n("strong",[t._v("对应的钩子函数：")])]),t._v(" "),n("ul",[n("li",[t._v("actionUrl：直接根据后台接口赋值即可")]),t._v(" "),n("li",[t._v("beforeUpload：验证是否为音频")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeUpload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// file.type好像只能返回图片的格式，其他的将会是 ""， 所以需要自己获取后缀名判断文件格式')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" pointIndex "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("lastIndexOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fileType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pointIndex"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取到文件后缀名")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if (fileType !== 'mp3' && fileType !== 'ogg' && fileType !== 'wav') {")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fileType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mp3'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" fileType "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ogg'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'你选择的文件不是音频哦，仅支持mp3和ogg格式'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("ul",[n("li",[t._v("handleSuccess：上传成功的回调，主要功能实现的地方，后面介绍")]),t._v(" "),n("li",[t._v("uploadIng：设置显示loading")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("uploadIng")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//上传时显示loading")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fullscreenLoading "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_2-2-在富文本插件的toolbar定义一个按钮，点击时调用上传组件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-在富文本插件的toolbar定义一个按钮，点击时调用上传组件"}},[t._v("#")]),t._v(" 2.2 在富文本插件的toolbar定义一个按钮，点击时调用上传组件")]),t._v(" "),n("p",[t._v("注意：vue-quill-editor是基于quill富文本的二次封装（源码可以很容易看出来），所以需要看配置方法的直接去看quill即可"),n("br"),t._v(" "),n("strong",[t._v("A. 修改 editorOption 配置，添加一个按钮：")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//富文本设置")]),t._v("\neditorOption"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    modules"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//其他配置，如quill-image-extend-module")]),t._v("\n        toolbar"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            container"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bold'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'italic'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'underline'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'strike'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'size'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'small'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'large'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'huge'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'header'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'color'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'background'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blockquote'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'code-block'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'link'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'image'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'voice'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//新添加的工具")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            handlers"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'voice'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//添加工具方法，即点击时模仿点击上传组件的按钮")]),t._v("\n                  document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.uploadVoiceBtn'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("initVoiceButton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//初始化"voice"按钮样式')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" voiceButton "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.ql-voice'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//"ql-" 是插件自动加的前缀')]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加样式，使用fontawesome初始化图标的样式")]),t._v("\n        voiceButton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fa'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        voiceButton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fa-volume-up'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        voiceButton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("classList"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fa-lg'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当然，可以直接手写样式，如：")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// voiceButton.style.cssText = "width:80px; border:1px solid #ccc; border-radius:5px;";')]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// voiceButton.innerText="上传音频";')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("p",[n("strong",[t._v("B. mounted中初始化显示按钮")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("mounted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("editorOption"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("initVoiceButton")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//初始化音频图标，这样才能显示")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("p",[t._v("添加完成后效果：\n"),n("img",{attrs:{src:a(162),alt:"自定义上传音频按钮"}})]),t._v(" "),n("p",[t._v("如果是在不同的文件，即配置文件和组件调用不在同一个文件，请参考："),n("a",{attrs:{href:"https://blog.csdn.net/w390058785/article/details/84337859",target:"_blank",rel:"noopener noreferrer"}},[t._v("在quill-editor组件工具栏中添加自定义的方法"),n("OutboundLink")],1),t._v("，这篇文章在自定义按钮部分写的很清楚！")]),t._v(" "),n("h4",{attrs:{id:"_3-监听上传成功的回调函数，在富文本输入框中插入音频标签"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-监听上传成功的回调函数，在富文本输入框中插入音频标签"}},[t._v("#")]),t._v(" 3. 监听上传成功的回调函数，在富文本输入框中插入音频标签")]),t._v(" "),n("p",[n("strong",[t._v("这一步骤是整个功能的核心！！！")])]),t._v(" "),n("p",[t._v("网上有很多显示自定义功能显示的文字，但主要都是以图片为主。大多用的都是 quill 的 "),n("code",[t._v("pasteHTML")]),t._v(" 方法，但我试了以后并不能实现。将"),n("code",[t._v('<audio src="" controls="true" ></audio>')]),t._v("这样的字符串加入到富文本绑定的变量上面后，并不能显示。最后，可以使用"),n("code",[t._v("insertEmbed")]),t._v("插入对象到富文本中，"),n("strong",[t._v("但是")]),t._v("，这个方法好像也只能插入"),n("code",[t._v("image")]),t._v("，不能插入其他的标签。")]),t._v(" "),n("p",[n("strong",[t._v("解决方法：自定义FileBlot ==>> Quill调用自定义Blot （即自定义一个Quill能解析显示的标签，并且添加的里面去）")])]),t._v(" "),n("ul",[n("li",[t._v("quill-editor 组件调用")])]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("import { quillEditor, Quill } from 'vue-quill-editor'\n\ncomponents: {\n    quillEditor\n},\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- change是内容改变后的回调函数，做页面处理，这里不说，自行根据系统页面处理 --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("quill-editor")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myTextEditor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-model")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("editorTempValue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":options")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("editorOption"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@change")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onEditorChange($event)"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("quill-editor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("ul",[n("li",[t._v("handleSuccess：上传成功的回调，主要功能实现的地方")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("handleSuccess")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" file"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fileList")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fullscreenLoading "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取富文本组件实例")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" quill "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$refs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("myTextEditor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quill\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果上传成功")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSelection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取光标所在位置")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" BlockEmbed "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blots/block/embed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AudioBlot")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BlockEmbed")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" node "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置audio的src属性")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'controls'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置audio的controls，否则他将不会显示")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'controlsList'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nodownload'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置audio的下载功能为不能下载")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'voice'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("         "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置一个id")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// static value(node) {")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   return {")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     url: node.getAttribute('src')")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   };")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        AudioBlot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("blotName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'audio'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        AudioBlot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagName "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'audio'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//自定义的标签为audio")]),t._v("\n        Quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AudioBlot"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// insertEmbed(index: Number(插入的位置), type: String(标签类型), value: any(参数，将传入到create的方法中去), source: String = 'api')")]),t._v("\n        quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertEmbed")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'audio'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"api"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSelection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//光标位置向后移动一位")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("        \n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$message"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上传失败，提示错误信息")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("p",[t._v("完成后效果："),n("br"),t._v(" "),n("img",{attrs:{src:a(163),alt:"实现自定义上传音频功能"}})]),t._v(" "),n("h4",{attrs:{id:"_4-遇到的问题-当然，如果你没有遇到，请忽略"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-遇到的问题-当然，如果你没有遇到，请忽略"}},[t._v("#")]),t._v(" 4. 遇到的问题  ==>> 当然，如果你没有遇到，请忽略")]),t._v(" "),n("p",[t._v("在添加完音频文件后，离开输入框，做其他的操作；之后再回来，发现音频文件失效了，src属性变成了"),n("code",[t._v("undefined")]),t._v(";"),n("br"),t._v("\n即")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("audio src"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://sysssc.oss-cn-shenzhen.aliyuncs.com//osstest/20200114/123fe211b5e74adda9b758087ab58beb.mp3"')]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" controlslist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodownload"')]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"voice"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("audio"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("p",[t._v("变成了")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("audio src"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"undefined"')]),t._v(" controls"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),t._v(" controlslist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nodownload"')]),t._v(" id"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"voice"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("audio"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),n("p",[t._v("花了大量时间找寻原因之后，发现："),n("br"),t._v("\n在 "),n("code",[t._v("vue-quill-editor/src/editor.vue")]),t._v(" 里面发现监听的"),n("code",[t._v("value")]),t._v("时使用了"),n("code",[t._v("this.quill.pasteHTML(newVal)")]),t._v("，这一句造成了"),n("code",[t._v("src")]),t._v("属性的丢失。它内部其实采用了"),n("a",{attrs:{href:"http://doc.quilljs.cn/1409381#dangerouslyPasteHTML_52",target:"_blank",rel:"noopener noreferrer"}},[t._v("dangerouslyPasteHTML"),n("OutboundLink")],1),t._v("重写。")]),t._v(" "),n("p",[t._v("改成："),n("br"),t._v(" "),n("code",[t._v("this.$refs.editor.children[0].innerHTML = newVal;")]),t._v("即可，监听"),n("code",[t._v("content")]),t._v("亦然")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Watch content change")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVal")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newVal "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" newVal "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_content "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pasteHTML会导致添加音频时，<audio src='undefined' ...>")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this.quill.pasteHTML(newVal)")]),t._v("\n\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$refs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("editor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newVal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("newVal"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("quill"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setText")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("p",[t._v("参考文章："),n("br"),t._v(" "),n("a",{attrs:{href:"https://blog.csdn.net/w390058785/article/details/84337859",target:"_blank",rel:"noopener noreferrer"}},[t._v("【Vue】在quill-editor组件工具栏中添加自定义的方法（添加源码编辑功能）"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://www.jianshu.com/p/9e4e4d955d0f",target:"_blank",rel:"noopener noreferrer"}},[t._v("富文本编辑vue-quill-editor自定义图片、文件上传"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://segmentfault.com/q/1010000012055453",target:"_blank",rel:"noopener noreferrer"}},[t._v("insertEmbed自定义插入a标签"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"http://doc.quilljs.cn/1409423",target:"_blank",rel:"noopener noreferrer"}},[t._v("Quill官方中文文档(配置详情，insertEmbed方法)"),n("OutboundLink")],1)]),t._v(" "),n("p",[n("a",{attrs:{href:"https://quilljs.com/guides/cloning-medium-with-parchment/",target:"_blank",rel:"noopener noreferrer"}},[t._v("FileBlot官方用法详解"),n("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);