(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{199:function(a,e,r){"use strict";r.r(e);var t=r(0),s=Object(t.a)({},(function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h3",{attrs:{id:"webpack打包构建太慢，怎么处理？"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#webpack打包构建太慢，怎么处理？"}},[a._v("#")]),a._v(" Webpack打包构建太慢，怎么处理？")]),a._v(" "),r("h4",{attrs:{id:"_1-webpack基本概念"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-webpack基本概念"}},[a._v("#")]),a._v(" 1. webpack基本概念")]),a._v(" "),r("p",[a._v("webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。\nwebpack 核心概念包括以下几个：")]),a._v(" "),r("ul",[r("li",[a._v("Entry（入口、起点）")]),a._v(" "),r("li",[a._v("Output（出口）")]),a._v(" "),r("li",[a._v("Module（模块,在 Webpack 里一切皆模块,一个模块对应着一个文件）")]),a._v(" "),r("li",[a._v("Chunk（代码块,一个 Chunk 由多个模块组合而成,用于代码合并与分割。）")]),a._v(" "),r("li",[a._v("Loader（让 webpack 能够去处理那些非 JavaScript 文件，webpack 自身只理解 JavaScript）")]),a._v(" "),r("li",[a._v("Plugin（插件可以用于执行范围更广的任务）")])]),a._v(" "),r("h4",{attrs:{id:"_2-简单的webpack实现原理"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-简单的webpack实现原理"}},[a._v("#")]),a._v(" 2. 简单的webpack实现原理")]),a._v(" "),r("ul",[r("li",[a._v("读取文件分析模块依赖")]),a._v(" "),r("li",[a._v("对模块进行解析执行(深度遍历)")]),a._v(" "),r("li",[a._v("针对不同的模块使用相应的loader")]),a._v(" "),r("li",[a._v("编译模块，生成抽象语法树AST。")]),a._v(" "),r("li",[a._v("循环遍历AST树，拼接输出js。")])]),a._v(" "),r("h4",{attrs:{id:"_3-怎么提高webpack的打包速度-参考文章"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-怎么提高webpack的打包速度-参考文章"}},[a._v("#")]),a._v(" 3. 怎么提高webpack的打包速度    "),r("a",{attrs:{href:"https://www.cnblogs.com/imwtr/p/7801973.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考文章"),r("OutboundLink")],1)]),a._v(" "),r("ul",[r("li",[r("p",[r("strong",[a._v("关闭sourceMap")]),r("br"),a._v("\n开发环境使用 sourceMap 可以便于调试，但在生成环境不需要了，关闭后能大大提高打包速度")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("配置externals列表，使用cdn或者全局script标签引入")]),r("br"),a._v("\n比如jQuery插件，react, react-dom等，代码量是很多的，打包起来可能会很耗时。请注意："),r("a",{attrs:{href:"https://blog.csdn.net/fengyinchao/article/details/52100357",target:"_blank",rel:"noopener noreferrer"}},[a._v("externals的缺陷问题"),r("OutboundLink")],1)])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("使用 DllPlugin 和 DllReferencePlugin")]),r("br"),a._v("\n这种方式其实和externals是类似的，主要用于有些模块没有可以在script标签中引入的资源（纯npm包）"),r("br"),a._v("\nDll是动态链接库的意思，实际上就是将这些npm打包生成一个JSON文件，这个文件里包含了npm包的路径对应信息"),r("br"),a._v("\n这两个插件要一起用")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("善用resolve的alias 和 loader中的exclude/include")]),r("br"),a._v("\nalias: 定义别名"),r("br"),a._v("\nloader: 主要是处理对应的文件。exclude/include可以缩小文件的匹配范围")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("路由使用懒加载（属于一个项目优化）")]),r("br"),a._v("\n开发环境不使用懒加载, 因为懒加载页面太多的话会造成webpack热更新太慢, 所以只有生产环境使用懒加载")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("代码压缩用ParallelUglifyPlugin代替自带的 UglifyJsPlugin插件")]),r("br"),a._v("\n自带的JS压缩插件是单线程执行的，而webpack-parallel-uglify-plugin可以并行的执行")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("css-loader使用0.15.0以下的版本")]),r("br"),a._v("\n听闻这个版本以上的速度会慢许多")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("使用fast-sass-loader代替sass-loader")]),a._v("\nfast-sass-loader可以并行地处理sass,在提交构建之前会先组织好代码，速度也会快一些")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("babel-loader开启缓存")]),r("br"),a._v("\nbabel-loader在执行的时候，可能会产生一些运行期间重复的公共文件，造成代码体积大冗余，同时也会减慢编译效率"),r("br"),a._v("\n可以使用 cacheDirectory参数 或使用 transform-runtime插件 来开启缓存，提高速度")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("提取公共代码")]),r("br"),a._v("\n使用CommonsChunkPlugin提取公共的模块，可以减少文件体积，也有助于浏览器层的文件缓存")])]),a._v(" "),r("li",[r("p",[r("strong",[a._v("以模块化来引入")]),r("br"),a._v("\n有些模块是可以以模块化来引入的，就是说可以只引入其中的一部分，比如说lodash")])])]),a._v(" "),r("div",{staticClass:"language-javascript extra-class"},[r("pre",{pre:!0,attrs:{class:"language-javascript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 原来的引入方式")]),a._v("\n "),r("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("debounce"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[a._v("'lodash'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//按模块化的引入方式")]),a._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" debounce "),r("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[a._v("'lodash/debounce'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);