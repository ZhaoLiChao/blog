(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{161:function(t,s,a){t.exports=a.p+"assets/img/0-config.3a7d4a9c.png"},211:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h4",{attrs:{id:"_1-安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装"}},[t._v("#")]),t._v(" 1. 安装")]),t._v(" "),n("pre",[n("code",[t._v("初始化项目：cnpm init -y   \n安装webpack和cli工具：cnpm install webpack webpack-cli --save-dev\n")])]),t._v(" "),n("p",[t._v("注意：")]),t._v(" "),n("ul",[n("li",[t._v("webpack版本为 4.x")]),t._v(" "),n("li",[t._v("node版本未 8.2+  ==>> "),n("code",[t._v("npx")]),t._v(" 是 5.2版本之后"),n("code",[t._v("npm")]),t._v("提供的命令可以执行"),n("code",[t._v(".bin")]),t._v("下的可执行文件")])]),t._v(" "),n("h4",{attrs:{id:"_2-默认打包（0配置）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-默认打包（0配置）"}},[t._v("#")]),t._v(" 2. 默认打包（0配置）")]),t._v(" "),n("pre",[n("code",[t._v("npx webpack\n")])]),t._v(" "),n("p",[t._v("当执行npx webpack命令的时候，webpack会自动查找项目中src目录下的index.js文件，然后进行打包，生成一个dist目录并存在一个打包好的main.js文件，并且打包出来的文件自动压缩！"),n("br"),t._v("\n产生了"),n("code",[t._v("dist")]),t._v("目录，此目录为最终打包出的结果。"),n("code",[t._v("main.js")]),t._v("可以在html中直接引用,这里还提示我们默认"),n("code",[t._v("mode")]),t._v(" 为"),n("code",[t._v("production")]),t._v("！")]),t._v(" "),n("p",[n("img",{attrs:{src:a(161),alt:"0配置打包"}})]),t._v(" "),n("h5",{attrs:{id:"_2-1-命令行配置打包模式（命令传参）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-命令行配置打包模式（命令传参）"}},[t._v("#")]),t._v(" 2.1 命令行配置打包模式（命令传参）:")]),t._v(" "),n("pre",[n("code",[t._v("npx webpack --mode development  \n")])]),t._v(" "),n("h5",{attrs:{id:"_2-1-命令行以指定文件为配置文件打包（命令传参）"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-命令行以指定文件为配置文件打包（命令传参）"}},[t._v("#")]),t._v(" 2.1 命令行以指定文件为配置文件打包（命令传参）:")]),t._v(" "),n("pre",[n("code",[t._v("npx webpack --config ./build/webpack.base.js   \n// ==> 以当前目录下的`build/webpack.base.js`为配置文件，默认为当前当前目录下的`webpack.config.js`\n")])]),t._v(" "),n("h4",{attrs:{id:"_3-自定义配置-webpack-config-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-自定义配置-webpack-config-js"}},[t._v("#")]),t._v(" 3. 自定义配置 webpack.config.js")]),t._v(" "),n("p",[t._v("我们打包时一般不会采用0配置(0配置在实际中基本无用)，webpack 在打包时默认会查找当前目录下的 "),n("code",[t._v("webpack.config.js")]),t._v(" 或者 "),n("code",[t._v("webpackfile.js")]),t._v(" 文件。我们一般都是使用 "),n("code",[t._v("webpack.config.js")])]),t._v(" "),n("p",[n("code",[t._v("webpack.config.js")]),t._v("的基本属性有：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模式配置 'development'/ 'production'")]),t._v("\n    entry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("               "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口文件 => 可以为 {} 配置多入口")]),t._v("\n    output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 出口文件")]),t._v("\n    module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("              "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理对应模块 => 配置loader")]),t._v("\n    plugins"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("             "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应的插件")]),t._v("\n    devServer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发服务器配置")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"_4-配置打包命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置打包命令"}},[t._v("#")]),t._v(" 4. 配置打包命令")]),t._v(" "),n("p",[t._v("在当前目录下新建两个文件 "),n("code",[t._v("webpack.config.dev.js")]),t._v(" 和 "),n("code",[t._v("webpack.config.prod.js")]),t._v("，分别配置mode为 "),n("code",[t._v("development")]),t._v(" 和  "),n("code",[t._v("production")]),t._v("！")]),t._v(" "),n("p",[t._v("在 "),n("code",[t._v("package.json")]),t._v(" 里面配置打包命令：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config ./webpack.config.prod"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config ./webpack.config.dev"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("p",[t._v("运行 "),n("code",[t._v("cnpm run dev")]),t._v("：调用当前目录下的 "),n("code",[t._v("webpack.config.dev")]),t._v(" 为配置文件；"),n("br"),t._v("\n运行 "),n("code",[t._v("cnpm run build")]),t._v("：调用当前目录下的 "),n("code",[t._v("webpack.config.prod")]),t._v(" 为配置文件；")]),t._v(" "),n("h4",{attrs:{id:"_5-配置有参数的打包命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置有参数的打包命令"}},[t._v("#")]),t._v(" 5. 配置有参数的打包命令")]),t._v(" "),n("h5",{attrs:{id:"_5-1-在-package-json-里面配置打包命令-用-npm-run-build-dev-打包开发环境-："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-在-package-json-里面配置打包命令-用-npm-run-build-dev-打包开发环境-："}},[t._v("#")]),t._v(" 5.1 在 "),n("code",[t._v("package.json")]),t._v(" 里面配置打包命令 (用 "),n("code",[t._v("npm run build:dev")]),t._v(" 打包开发环境)：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build:prod"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config ./webpack.config.prod --env.production"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build:dev"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"webpack --config ./webpack.config.prod --env.development"')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),n("h5",{attrs:{id:"_5-2-修改配置文件webpack-config-prod-js："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-修改配置文件webpack-config-prod-js："}},[t._v("#")]),t._v(" 5.2 修改配置文件"),n("code",[t._v("webpack.config.prod.js")]),t._v("：")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("env")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { development: true }  ==>> development是命令中传入的")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        mode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("development "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模式配置 'development'/ 'production'")]),t._v("\n        entry"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口文件 => 可以为 {} 配置多入口")]),t._v("\n        output"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包出的结果文件")]),t._v("\n            path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包到dist目录下，为避免出问题，建议使用绝对路径")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理对应模块 => 配置loader")]),t._v("\n        plugins"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应的插件")]),t._v("\n        devServer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发服务器配置")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h5",{attrs:{id:"_5-3-使用配置好的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-使用配置好的命令"}},[t._v("#")]),t._v(" 5.3 使用配置好的命令")]),t._v(" "),n("p",[t._v("打包开发环境：")]),t._v(" "),n("pre",[n("code",[t._v("cnpm run build:dev  // ==>> 该命令将传入参数 --env.development，所以在`webpack.config.prod.js`打印出的`console.log(env)` 结果是 `{ development: true }`\n")])]),t._v(" "),n("p",[t._v("打包生产环境：")]),t._v(" "),n("pre",[n("code",[t._v("cnpm run build:prod  // ==>> 该命令将传入参数 --env.production，所以在`webpack.config.prod.js`打印出的`console.log(env)` 结果是 `{ production: true }`\n")])]),t._v(" "),n("p",[t._v("总结命令中带有参数：")]),t._v(" "),n("ul",[n("li",[t._v("原本的"),n("code",[t._v("webpack.config.prod.js")]),t._v("中的 mode 属性是写死为 "),n("code",[t._v("production")]),t._v("，并且导出的是一个object")]),t._v(" "),n("li",[t._v("修改后，导出的是一个函数，函数return返回一个对象；并且接受一个参数，该参数为命令传入的参数，即为一个对象，key 为"),n("code",[t._v("--env.")]),t._v("后面的的参数，value为"),n("code",[t._v("true")])]),t._v(" "),n("li",[t._v("传入的参数不限于"),n("code",[t._v("development")]),t._v("和"),n("code",[t._v("production")]),t._v("，可以设置为其他的。如配置："),n("code",[t._v("--env.test")]),t._v(" ==>> 打印结果："),n("code",[t._v("{ test: true }")])]),t._v(" "),n("li",[t._v("修改后，可以获取到自己想要打包的类型，然后在配置文件中做相应的配置修改")])])])}),[],!1,null,null,null);s.default=e.exports}}]);