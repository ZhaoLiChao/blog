<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1. 安装 | 个人前端知识积累</title>
    <meta name="description" content="前端路漫漫，不知终点，不断记录，慢慢积累">
    <link rel="icon" href="/blog/favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.27bd7ea7.css" as="style"><link rel="preload" href="/blog/assets/js/app.30905f38.js" as="script"><link rel="preload" href="/blog/assets/js/2.9b1e4969.js" as="script"><link rel="preload" href="/blog/assets/js/19.4e9fe3e1.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.12b48d23.js"><link rel="prefetch" href="/blog/assets/js/11.d40d0aa9.js"><link rel="prefetch" href="/blog/assets/js/12.9fbe985a.js"><link rel="prefetch" href="/blog/assets/js/13.17381043.js"><link rel="prefetch" href="/blog/assets/js/14.37b27ed1.js"><link rel="prefetch" href="/blog/assets/js/15.b012dcd7.js"><link rel="prefetch" href="/blog/assets/js/16.c7a355f6.js"><link rel="prefetch" href="/blog/assets/js/17.84062c09.js"><link rel="prefetch" href="/blog/assets/js/18.b7283b3c.js"><link rel="prefetch" href="/blog/assets/js/20.0af675cd.js"><link rel="prefetch" href="/blog/assets/js/21.c804786d.js"><link rel="prefetch" href="/blog/assets/js/22.e9bfa410.js"><link rel="prefetch" href="/blog/assets/js/23.59f79aeb.js"><link rel="prefetch" href="/blog/assets/js/24.4a96332d.js"><link rel="prefetch" href="/blog/assets/js/25.823f05d5.js"><link rel="prefetch" href="/blog/assets/js/26.29ec861f.js"><link rel="prefetch" href="/blog/assets/js/27.6b502373.js"><link rel="prefetch" href="/blog/assets/js/28.f954eb18.js"><link rel="prefetch" href="/blog/assets/js/29.ade49222.js"><link rel="prefetch" href="/blog/assets/js/3.c3e32d4f.js"><link rel="prefetch" href="/blog/assets/js/30.851de0d2.js"><link rel="prefetch" href="/blog/assets/js/31.9a586d36.js"><link rel="prefetch" href="/blog/assets/js/32.b886717e.js"><link rel="prefetch" href="/blog/assets/js/33.b90f8639.js"><link rel="prefetch" href="/blog/assets/js/34.1a260ee4.js"><link rel="prefetch" href="/blog/assets/js/35.3fbd8ceb.js"><link rel="prefetch" href="/blog/assets/js/36.4c12275b.js"><link rel="prefetch" href="/blog/assets/js/37.3077b871.js"><link rel="prefetch" href="/blog/assets/js/38.b35b52b2.js"><link rel="prefetch" href="/blog/assets/js/39.902380aa.js"><link rel="prefetch" href="/blog/assets/js/4.717b65d4.js"><link rel="prefetch" href="/blog/assets/js/40.9dcf98d6.js"><link rel="prefetch" href="/blog/assets/js/41.d4929502.js"><link rel="prefetch" href="/blog/assets/js/42.1a7a7063.js"><link rel="prefetch" href="/blog/assets/js/43.a66f3b3c.js"><link rel="prefetch" href="/blog/assets/js/44.f55aff1f.js"><link rel="prefetch" href="/blog/assets/js/45.89a2d03c.js"><link rel="prefetch" href="/blog/assets/js/46.e0cc0258.js"><link rel="prefetch" href="/blog/assets/js/47.07f77af7.js"><link rel="prefetch" href="/blog/assets/js/48.9ac981b6.js"><link rel="prefetch" href="/blog/assets/js/49.6017d2ad.js"><link rel="prefetch" href="/blog/assets/js/5.e9c816fb.js"><link rel="prefetch" href="/blog/assets/js/50.1adc58cc.js"><link rel="prefetch" href="/blog/assets/js/51.2c0879ac.js"><link rel="prefetch" href="/blog/assets/js/52.01b1c076.js"><link rel="prefetch" href="/blog/assets/js/53.fe87ea6f.js"><link rel="prefetch" href="/blog/assets/js/54.1f3d1f59.js"><link rel="prefetch" href="/blog/assets/js/6.08d9f722.js"><link rel="prefetch" href="/blog/assets/js/7.9dadbf5a.js"><link rel="prefetch" href="/blog/assets/js/8.7ad82f4b.js"><link rel="prefetch" href="/blog/assets/js/9.e634038b.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.27bd7ea7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">个人前端知识积累</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">home</a></div><div class="nav-item"><a href="/blog/javaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">vue技术栈</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">react技术栈</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link router-link-active">webpack</a></div><div class="nav-item"><a href="/blog/moduleComponents/" class="nav-link">组件封装</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试/随笔 Menu" class="dropdown-title"><span class="title">面试/随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/recordSelf/interview/" class="nav-link">面试题</a></li><li class="dropdown-item"><!----> <a href="/blog/recordSelf/problem/" class="nav-link">随笔</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">home</a></div><div class="nav-item"><a href="/blog/javaScript/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/blog/vue/" class="nav-link">vue技术栈</a></div><div class="nav-item"><a href="/blog/react/" class="nav-link">react技术栈</a></div><div class="nav-item"><a href="/blog/webpack/" class="nav-link router-link-active">webpack</a></div><div class="nav-item"><a href="/blog/moduleComponents/" class="nav-link">组件封装</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试/随笔 Menu" class="dropdown-title"><span class="title">面试/随笔</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/recordSelf/interview/" class="nav-link">面试题</a></li><li class="dropdown-item"><!----> <a href="/blog/recordSelf/problem/" class="nav-link">随笔</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/webpack/" class="sidebar-link">介绍</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基本配置</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/webpack/基础使用.html" class="active sidebar-link">webpack基础使用</a></li><li><a href="/blog/webpack/入口出口.html" class="sidebar-link">配置入口与出口</a></li><li><a href="/blog/webpack/开发与生产环境.html" class="sidebar-link">配置开发与生产环境</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>webpack插件</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h4 id="_1-安装"><a href="#_1-安装" class="header-anchor">#</a> 1. 安装</h4> <pre><code>初始化项目：cnpm init -y   
安装webpack和cli工具：cnpm install webpack webpack-cli --save-dev
</code></pre> <p>注意：</p> <ul><li>webpack版本为 4.x</li> <li>node版本未 8.2+  ==&gt;&gt; <code>npx</code> 是 5.2版本之后<code>npm</code>提供的命令可以执行<code>.bin</code>下的可执行文件</li></ul> <h4 id="_2-默认打包（0配置）"><a href="#_2-默认打包（0配置）" class="header-anchor">#</a> 2. 默认打包（0配置）</h4> <pre><code>npx webpack
</code></pre> <p>当执行npx webpack命令的时候，webpack会自动查找项目中src目录下的index.js文件，然后进行打包，生成一个dist目录并存在一个打包好的main.js文件，并且打包出来的文件自动压缩！<br>
产生了<code>dist</code>目录，此目录为最终打包出的结果。<code>main.js</code>可以在html中直接引用,这里还提示我们默认<code>mode</code> 为<code>production</code>！</p> <p><img src="/blog/assets/img/0-config.3a7d4a9c.png" alt="0配置打包"></p> <h5 id="_2-1-命令行配置打包模式（命令传参）"><a href="#_2-1-命令行配置打包模式（命令传参）" class="header-anchor">#</a> 2.1 命令行配置打包模式（命令传参）:</h5> <pre><code>npx webpack --mode development  
</code></pre> <h5 id="_2-1-命令行以指定文件为配置文件打包（命令传参）"><a href="#_2-1-命令行以指定文件为配置文件打包（命令传参）" class="header-anchor">#</a> 2.1 命令行以指定文件为配置文件打包（命令传参）:</h5> <pre><code>npx webpack --config ./build/webpack.base.js   
// ==&gt; 以当前目录下的`build/webpack.base.js`为配置文件，默认为当前当前目录下的`webpack.config.js`
</code></pre> <h4 id="_3-自定义配置-webpack-config-js"><a href="#_3-自定义配置-webpack-config-js" class="header-anchor">#</a> 3. 自定义配置 webpack.config.js</h4> <p>我们打包时一般不会采用0配置(0配置在实际中基本无用)，webpack 在打包时默认会查找当前目录下的 <code>webpack.config.js</code> 或者 <code>webpackfile.js</code> 文件。我们一般都是使用 <code>webpack.config.js</code></p> <p><code>webpack.config.js</code>的基本属性有：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>     <span class="token comment">// 模式配置 'development'/ 'production'</span>
    entry<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>               <span class="token comment">// 入口文件 =&gt; 可以为 {} 配置多入口</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>              <span class="token comment">// 出口文件</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>              <span class="token comment">// 处理对应模块 =&gt; 配置loader</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>             <span class="token comment">// 对应的插件</span>
    devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>           <span class="token comment">// 开发服务器配置</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_4-配置打包命令"><a href="#_4-配置打包命令" class="header-anchor">#</a> 4. 配置打包命令</h4> <p>在当前目录下新建两个文件 <code>webpack.config.dev.js</code> 和 <code>webpack.config.prod.js</code>，分别配置mode为 <code>development</code> 和  <code>production</code>！</p> <p>在 <code>package.json</code> 里面配置打包命令：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./webpack.config.prod&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./webpack.config.dev&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>运行 <code>cnpm run dev</code>：调用当前目录下的 <code>webpack.config.dev</code> 为配置文件；<br>
运行 <code>cnpm run build</code>：调用当前目录下的 <code>webpack.config.prod</code> 为配置文件；</p> <h4 id="_5-配置有参数的打包命令"><a href="#_5-配置有参数的打包命令" class="header-anchor">#</a> 5. 配置有参数的打包命令</h4> <h5 id="_5-1-在-package-json-里面配置打包命令-用-npm-run-build-dev-打包开发环境-："><a href="#_5-1-在-package-json-里面配置打包命令-用-npm-run-build-dev-打包开发环境-：" class="header-anchor">#</a> 5.1 在 <code>package.json</code> 里面配置打包命令 (用 <code>npm run build:dev</code> 打包开发环境)：</h5> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;build:prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./webpack.config.prod --env.production&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config ./webpack.config.prod --env.development&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h5 id="_5-2-修改配置文件webpack-config-prod-js："><a href="#_5-2-修改配置文件webpack-config-prod-js：" class="header-anchor">#</a> 5.2 修改配置文件<code>webpack.config.prod.js</code>：</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// { development: true }  ==&gt;&gt; development是命令中传入的</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        mode<span class="token punctuation">:</span> env<span class="token punctuation">.</span>development <span class="token operator">?</span> <span class="token string">'development'</span> <span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span> <span class="token comment">// 模式配置 'development'/ 'production'</span>
        entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> <span class="token comment">// 入口文件 =&gt; 可以为 {} 配置多入口</span>
        output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span> <span class="token comment">// 打包出的结果文件</span>
            path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span> <span class="token comment">// 打包到dist目录下，为避免出问题，建议使用绝对路径</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        module<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 处理对应模块 =&gt; 配置loader</span>
        plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 对应的插件</span>
        devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 开发服务器配置</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="_5-3-使用配置好的命令"><a href="#_5-3-使用配置好的命令" class="header-anchor">#</a> 5.3 使用配置好的命令</h5> <p>打包开发环境：</p> <pre><code>cnpm run build:dev  // ==&gt;&gt; 该命令将传入参数 --env.development，所以在`webpack.config.prod.js`打印出的`console.log(env)` 结果是 `{ development: true }`
</code></pre> <p>打包生产环境：</p> <pre><code>cnpm run build:prod  // ==&gt;&gt; 该命令将传入参数 --env.production，所以在`webpack.config.prod.js`打印出的`console.log(env)` 结果是 `{ production: true }`
</code></pre> <p>总结命令中带有参数：</p> <ul><li>原本的<code>webpack.config.prod.js</code>中的 mode 属性是写死为 <code>production</code>，并且导出的是一个object</li> <li>修改后，导出的是一个函数，函数return返回一个对象；并且接受一个参数，该参数为命令传入的参数，即为一个对象，key 为<code>--env.</code>后面的的参数，value为<code>true</code></li> <li>传入的参数不限于<code>development</code>和<code>production</code>，可以设置为其他的。如配置：<code>--env.test</code> ==&gt;&gt; 打印结果：<code>{ test: true }</code></li> <li>修改后，可以获取到自己想要打包的类型，然后在配置文件中做相应的配置修改</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/webpack/" class="prev router-link-active">介绍</a></span> <span class="next"><a href="/blog/webpack/入口出口.html">配置入口与出口</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.30905f38.js" defer></script><script src="/blog/assets/js/2.9b1e4969.js" defer></script><script src="/blog/assets/js/19.4e9fe3e1.js" defer></script>
  </body>
</html>
